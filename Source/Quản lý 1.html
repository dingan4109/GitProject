<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>QL1</title>
    <style>
        fieldset {width: 30%; height: 40%}
        td {text-align: center}
    </style>
</head>
<body>
<p>Student Management Program</p>
<form action="#" method="post">
    <fieldset>
        <label for="name">Fullname</label><br>
        <input id="name" type="text"><br>

        <label for="dob">Date of birth</label><br>
        <input id="dob" type="date"><br>

        <label for="aScore">Average Score</label><br>
        <input id="aScore" type="number"><br>

        <label for="ability">Academic Ability</label><br>
        <input id="ability" type="text"><br>
        <br>

        <button type="button" onclick="add()">Add student</button>
        <button type="reset">Reset</button>
<!--        <button type="button" onclick="update()">Update</button>-->
<!--        <input id="hidden" type="hidden">-->
    </fieldset>
    <br>
    <div id="show"></div>
    <br>
    <div id="editForm"></div>
</form>
</body>
</html>
<script>
    function display(arr) {
        let num = 0;
        let table = "<table border='1' style='border-collapse: collapse'>\n" +
            "    <tr>\n" +
            "        <th colspan='7'>Student Management</th>\n" +
            "    </tr>\n" +
            "    <tr>\n" +
            "        <td>No</td>\n" +
            "        <td>Fullname</td>\n" +
            "        <td>Date of Birth</td>\n" +
            "        <td>Average Score</td>\n" +
            "        <td>Academic Ability</td>\n" +
            "        <td>Edit</td>\n" +
            "        <td>Delete</td>\n" +
            "    </tr>";
        for(let i =0;i<arr.length;i++){
            table+= " <tr>\n" +
                "        <td>"+ ++num +"</td>\n" +
                "        <td>"+arr[i].sName+"</td>\n" +
                "        <td>"+arr[i].sDob+"</td>\n" +
                "        <td>"+arr[i].sScore+"</td>\n" +
                "        <td>"+arr[i].sAbility+"</td>\n" +
                "        <td><button type=\"button\" onclick=\"edit("+i+")\">Edit</button></td>\n" +
                "        <td><button type=\"button\" onclick=\"del("+i+")\">Delete</button></td>\n" +
                "    </tr>";
        } table+= "</table>";
        show.innerHTML = table;
    }

    let studentArr = [];
    function add() {
        let name = document.getElementById('name').value;
        let dob = document.getElementById('dob').value;
        let aScore = document.getElementById('aScore').value;
        let ability = document.getElementById('ability').value;
        let obj = {sName: name,sDob: dob,sScore: aScore,sAbility:ability};
        studentArr.push(obj);
        display(studentArr);
    }

    function del(i) {
        if(confirm('Would you like to delete student: ' + studentArr[i].sName))
        studentArr.splice(i,1);
        display(studentArr)
    }
    //CÁC DÙNG PROMPT SỬA
    // function edit(i) {
    //     if(confirm('Would you like to update Name?'))
    //     studentArr[i].sName = prompt('update Name');
    //     if(confirm('Would you like to update Dob?'))
    //     studentArr[i].sDob = prompt('update Dob');
    //     if(confirm('Would you like to update Score?'))
    //     studentArr[i].sScore = prompt('update Score');
    //     if(confirm('Would you like to update Academic Ability?'))
    //     studentArr[i].sAbility = prompt('update Academic Ability');
    //     display(studentArr);
    // }

    //CÁCH HIỂN THỊ RỒI MỚI SỬA DÙNG BIẾN HIDDEN
    // function edit(i) {
    //     document.getElementById('name').value = studentArr[i].sName;
    //     document.getElementById('dob').value = studentArr[i].sDob;
    //     document.getElementById('aScore').value = studentArr[i].sScore;
    //     document.getElementById('ability').value = studentArr[i].sAbility;
    //     document.getElementById('hidden').value = i;
    //  }
    //
    //  function update() {
    //     let index = document.getElementById('hidden').value;
    //      let updateName = document.getElementById('name').value;
    //      let updateDob = document.getElementById('dob').value;
    //      let updateScore = document.getElementById('aScore').value;
    //      let updateAbility = document.getElementById('ability').value;
    //      studentArr[index] = {sName: updateName,sDob: updateDob,sScore: updateScore,sAbility:updateAbility};
    //      display(studentArr);
    //  }

    //CÁCH HIỂN THỊ BẢNG RIÊNG RỒI MỚI UPDATE KHÔNG DÙNG BIẾN HIDDEN
        function edit(i) {
        let editTable = "<fieldset> Update Fullname: <input type='text' id='inputName' value='"+studentArr[i].sName+"'><br>" +
            "Update Dob: <input type='date' id='inputDob' value='"+studentArr[i].sDob+"'><br>" +
            "Update Score: <input type='text' id='inputScore' value='"+studentArr[i].sScore+"'><br>" +
            "Update Ability: <input type='text' id='inputAbility' value='"+studentArr[i].sAbility+"'><br>" +
            "<button type=\"button\" onclick=\"update("+i+")\">Update</button>" + "</fieldset>";
            document.getElementById('editForm').innerHTML = editTable;
        }

        function update(i) {
            let updateName = document.getElementById('inputName').value;
            let updateDob = document.getElementById('inputDob').value;
            let updateScore = document.getElementById('inputScore').value;
            let updateAbility = document.getElementById('inputAbility').value;
            studentArr[i] = {sName: updateName,sDob: updateDob,sScore: updateScore,sAbility:updateAbility};
            document.getElementById('editForm').innerHTML = '';
            display(studentArr);
        }
</script>